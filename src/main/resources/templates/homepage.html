<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link rel="stylesheet" type="text/css" media="all" href="../static/css/styles.css" th:href="@{/css/styles.css}" /> <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Like4Like</title>
</head>

<body>

    <div>

        <div class="container py-4">
            <div class="d-flex justify-content-between flex-column flex-md-row">
                <div>
                    <p> Welcome to the site <span th:text="${user.username}"></p>
                    <p> <span th:text="${user.points}"></span> points</p>
                    
                    <div th:unless="${user.isOauthValid() == false}">
                        <p class="color-green">OAuth valid! <span th:text="${user.isOauthValid()}"></span></p>
                    </div>
                    <form action="/new" method="get"><button class="btn btn-primary my-1">Post new video to be liked</button>
                    </form>
                </div>
                    <div>
                        <form action="/oauth" method="get"><button class="btn btn-primary my-1 d-inline-flex align-items-center">Log in with Google <i class="bi bi-google ml-1 d-flex"></i></button> 
                        </form>
                        <div th:if="${!user.isOauthValid}">
                        <p class="color-red">Sie haben sich noch nicht bei Google angemeldet!</p>
                        
                    </div>
                    </div>
            </div>
            
            <div class="row py-4 videos-row">
                <div th:each="video: ${videos}" class="col-12 col-md-4 py-2 card">
                    <iframe th:src="@{https://www.youtube.com/embed/{url} (url=${video.key})}" frameborder="0"
                        alt="no video attached" allowfullscreen="1" class="rounded h-100"></iframe>

                    <form th:action="@{/like/{id} (id=${video.key})}" method="get"><button
                            class="btn btn-primary my-1 d-inline-flex align-items-center">Like <i
                                class="bi bi-hand-thumbs-up ml-1 d-flex"></i></button><span
                            th:text="${video.value}" class="ml-3"></span></form>
                </div>
            </div>

            <div class="row">
            <div class="mt-3 col-12 col-md-5 px-2 px-md-0">
                <form action="/room" method="get">
                    <button type="submit" class="btn btn-primary my-2">Make a new room</button>
                </form>

                <form action="/room" method="post">
                    <div class="form-group">
                        <label for="roomId">Enter a room ID</label>
                        <div class="d-flex"><input type="text" class="form-control" id="id" placeholder="Enter room ID"
                                name="id">
                            <button class="btn btn-primary ml-2">Join</button>
                        </div>
                    </div>
                </form>


                <form action="/logout" method="get"><button class="btn btn-primary my-2">Logout</button></form>
            </div>
        </div>
        </div>
    </div>


</body>

</html>